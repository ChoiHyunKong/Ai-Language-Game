# 게임 엔진 개발 지침서

산성비 스타일 퀴즈 게임 엔진 설계 및 구현 가이드

---

## 1. 게임 개요

### 핵심 메커니즘
- 산성비 스타일: 단어가 화면 상단에서 하단으로 낙하
- 타이핑 입력: 사용자가 정답 입력 시 해당 요소 제거
- 게임 오버: 단어가 바닥에 닿으면 체력 감소

---

## 2. 게임 모드

### 2.1 모드 구조
- GameEngine (공통 엔진)
- WordMode (단어 연습)
- MeaningMode (의미 퀴즈)
- SentenceMode (문장 완성)

### 2.2 모드별 상세
- 단어 연습: 데이터를 그대로 화면에 표시하고 입력받음
- 의미 퀴즈: 단어의 뜻을 표시하고 원본 단어를 정답으로 처리
- 문장 완성: 빈칸이 포함된 예문을 표시하고 누락된 단어를 정답으로 처리

### 2.3 특수 아이템 시스템 (단어 연습 모드)

#### 폭탄 단어
- 외형: 폭탄 이모지와 함께 표시
- 효과: 입력 시 500점 손실, 대신 라이프 손실 방지
- 전략: 라이프가 위험할 때 의도적으로 폭탄을 입력하여 생존
- 출현 확률: 일반 단어 대비 8%

#### 라이프 단어
- 외형: 하트 이모지와 함께 표시
- 효과: 입력 시 라이프 +1
- 희귀도: 매우 희귀 (일반 단어 대비 3%)
- 최대 라이프: 5개 제한

#### 골든 단어
- 외형: 황금색 배경
- 효과: 입력 시 점수 2배
- 출현 확률: 일반 단어 대비 5%

### 2.4 점수 시스템

#### 난이도별 기본 점수
- 난이도 1: 단어당 10~30점
- 난이도 2: 단어당 20~70점
- 난이도 3: 단어당 40~100점
- 난이도 4: 단어당 50~100점
- 난이도 5: 단어당 60~150점

#### 콤보 시스템
- 10콤보마다 점수 배율 1.2배 증가 (누적)
  - 10콤보: x1.2
  - 20콤보: x1.44 (1.2 x 1.2)
  - 30콤보: x1.728 (1.2 x 1.2 x 1.2)
- 50콤보 달성 시: 10초간 피버타임 발동
  - 피버타임 중 모든 단어 500점 고정

#### 페널티 시스템
- 오타 입력 시: 점수 1,000점 차감 (라이프는 유지)
- 단어 놓칠 시: 라이프 -1

### 2.5 마일스톤 보너스
- 10개 돌파마다 1000점 보너스 지급
- 특수 이펙트: "MILESTONE +1000!" 팝업 표시
- 사운드: 특별한 효과음 재생

---

## 3. 클래스 설계

### 3.1 GameEngine (메인 엔진)
- 역할: 캔버스 렌더링, 단어 생명주기 관리, 점수 및 콤보 계산
- 주요 속성: fallingWords, score, combo, health, isRunning
- 주요 메서드: start(), update(), render(), checkInput()

### 3.2 BaseMode (기본 클래스)
- 역할: 모든 게임 모드의 공통 인터페이스 정의
- 주요 기능: 랜덤 단어 획득 및 낙하 객체 생성 구조 제공

### 3.3 개별 모드 클래스
- WordMode, MeaningMode, SentenceMode가 BaseMode를 상속하여 각기 다른 렌더링 방식 구현

---

## 4. 게임 루프 상세

### 4.1 프레임 구조
1. 입력 처리: 키보드 입력 및 정답 대조
2. 상태 업데이트: 위치 이동, 충돌 감지, 점수 갱신
3. 렌더링: 화면 청소 및 객체 재그리기
4. 반복: requestAnimationFrame을 통한 루프 실행

---

## 5. 난이도 조절 알고리즘

### 5.1 기본 난이도 시스템
- 동적 난이도: 점수 임계치에 따른 레벨 업 시스템
- 조절 항목: 생성 간격 감소, 낙하 속도 증가, 최대 동시 단어 수 확대

### 5.2 난이도별 특수 기능

#### 난이도 1 (초보자)
- 특수 아이템: 폭탄 8%, 라이프 5%, 골든 5%
- 게임 속도: 느림
- 특수 기능: 슬로우 모션 파워업 (10초마다 5초간 속도 50% 감소)
- 최대 동시 단어: 3개

#### 난이도 2 (중급자)
- 특수 아이템: 폭탄 8%, 라이프 4%, 골든 5%
- 게임 속도: 보통
- 특수 기능: 타임 프리즈 파워업 (15초마다 3초간 일시정지)
- 최대 동시 단어: 5개

#### 난이도 3 (고급자)
- 특수 아이템: 폭탄 8%, 라이프 3%, 골든 7%
- 게임 속도: 빠름
- 특수 기능: 더블 스코어 버프 (콤보 10 이상 시 점수 2배)
- 최대 동시 단어: 7개

#### 난이도 4 (전문가)
- 특수 아이템: 폭탄 10%, 라이프 2%, 골든 8%
- 게임 속도: 매우 빠름
- 특수 기능: 체인 콤보 시스템 (연속 3개 정답 시 다음 단어 점수 3배)
- 최대 동시 단어: 9개

#### 난이도 5 (마스터)
- 특수 아이템: 폭탄 12%, 라이프 1%, 골든 10%
- 게임 속도: 극한
- 특수 기능:
  - 페버 모드 (콤보 15 이상 시 20초간 모든 점수 3배)
  - 크리티컬 히트 (10% 확률로 점수 5배)
- 최대 동시 단어: 12개
- 추가 도전: 랜덤 방해 요소 (단어 흔들림, 일시적 투명화)

---

## 6. 구현 체크리스트
- GameEngine 및 Canvas 렌더링 시스템 구축
- 단어 생성 및 낙하 상태 관리 로직 구현
- 사용자 입력 감지 및 점수 산정 로직 구현
- 각 게임 모드별 클래스 구현
- 게임 오버 및 결과 처리 로직 구현
