# Firebase 연동 가이드

글로벌 랭킹 시스템 및 보안 대책 수립

---

## 1. 개요
- 목적: LocalStorage 한계를 극복하고 전 세계 사용자 간의 순위 공유 시스템 구축
- 도구: Firebase Realtime Database (NoSQL 기반 실시간 데이터 동기화)

---

## 2. 데이터 아키텍처
- 구조: 모드별, 난이도별 랭킹 노드 분리
- 데이터 필드: playerName, score, maxCombo, accuracy, timestamp

---

## 3. 단계별 구축 계획
1. 프로젝트 생성: Firebase 콘솔 내 프로젝트 및 Realtime Database 활성화
2. SDK 연동: 웹 앱 등록 및 초기화 설정값 적용
3. 로직 통합: 기존 ScoreManager에서 랭킹 제출 시 글로벌 서버로 데이터 전송

---

## 4. 보안 및 부정행위 방지 대책

### 4.1 데이터베이스 보안 규칙
- 구조 검증: 데이터 타입 및 필드 제한 (예: score는 숫자형 필수)
- 권한 제어: 읽기 허용, 생성(Create)만 허용하고 수정/삭제는 차단

### 4.2 무결성 검증 고도화
- 논리 검증: 점수가 콤보 및 정확도 지표와 비례하는지 논리적 확인 로직 추가
- 조작 방지: 클라이언트 코드 난독화 및 전송 데이터 서명 처리 검토
- 최종 방어: 중요 기록 시 서버 사이드 함수(Cloud Functions)를 통한 기록 유효성 검사

---

## 5. 배포 유의사항
- API 키 관리: Client SDK 키 자체는 공개되어도 무방하나 보안 규칙 설정이 필수임
- 환경 변수: 로컬 환경 및 배포 환경 개발 키 일치 여부 점검
- 사용자 정보: 비밀번호 등 민감 개인정보는 저장 목록에서 제외
