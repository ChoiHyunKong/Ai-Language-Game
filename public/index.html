<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#a855f7">
    <title>AI 어휘 게임</title>
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+KR:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script type="module" src="/js/main.js"></script>
</head>

<body>
    <div id="menuScreen" class="screen active">
        <div class="animated-background">
            <div class="bg-gradient"></div>
            <div class="bg-particles" id="bgParticles"></div>
            <div class="bg-grid"></div>
        </div>

        <button id="muteBtn" class="mute-btn" title="사운드 켜기/끄기">
            <span id="muteIcon">🔊</span>
        </button>

        <div class="menu-container">
            <h1 class="game-title">AI 지식 게임</h1>
            <p class="game-subtitle">AI 용어를 배우는 타자 게임</p>

            <div class="menu-options">
                <div class="option-group">
                    <label>게임 모드</label>
                    <select id="gameModeSelect">
                        <option value="word">🔤 단어 연습</option>
                        <option value="meaning" disabled>🧠 의미 퀴즈 (준비 중)</option>
                        <option value="sentence" disabled>✏️ 문장 완성 (준비 중)</option>
                    </select>
                </div>

                <div class="option-group">
                    <label>언어</label>
                    <select id="languageSelect">
                        <option value="ko">🇰🇷 한국어</option>
                        <option value="en">🇺🇸 English</option>
                        <option value="jp">🇯🇵 日本語</option>
                    </select>
                </div>

                <div class="option-group">
                    <label>난이도</label>
                    <select id="difficultySelect">
                        <option value="1">⭐ 쉬움</option>
                        <option value="2">⭐⭐ 보통</option>
                        <option value="3" selected>⭐⭐⭐ 중간</option>
                        <option value="4">⭐⭐⭐⭐ 어려움</option>
                        <option value="5">⭐⭐⭐⭐⭐ 매우 어려움</option>
                    </select>
                </div>
            </div>

            <button id="startBtn" class="btn btn-primary">게임 시작</button>
            <button id="rankingBtn" class="btn btn-secondary">🏆 랭킹</button>
        </div>
    </div>

    <div id="gameScreen" class="screen">
        <div class="top-bar">
            <div class="stat">
                <span class="stat-icon">🏆</span>
                <span class="stat-label">SCORE</span>
                <span class="stat-value" id="scoreDisplay">0</span>
            </div>
            <div class="stat">
                <span class="stat-icon">⚡</span>
                <span class="stat-label">COMBO</span>
                <span class="stat-value" id="comboDisplay">0</span>
            </div>
            <div class="stat">
                <span class="stat-icon">❤️</span>
                <span class="stat-label">LIFE</span>
                <span class="stat-value" id="lifeDisplay">3</span>
            </div>
            <div class="stat">
                <span class="stat-icon">🚀</span>
                <span class="stat-label">SPEED</span>
                <span class="stat-value" id="speedDisplay">x1</span>
            </div>
            <button id="pauseBtn" class="btn-icon">⏸️</button>
        </div>

        <div class="game-main">
            <div class="game-area">
                <canvas id="gameCanvas"></canvas>
                <div id="comboPopup" class="combo-popup hidden"></div>
                <div id="speedUpPopup" class="speed-popup hidden">SPEED UP!</div>

                <div id="gameOverOverlay" class="game-over-overlay hidden">
                    <div class="game-over-content">
                        <h2>GAME OVER</h2>
                        <p>단어를 클릭하여 설명을 확인하세요</p>
                        <button id="finishGameBtn" class="btn btn-primary">결과 보기</button>
                    </div>
                </div>
            </div>

            <div class="word-history-panel" id="wordHistoryPanel">
                <div class="panel-header">
                    <span>📝 입력한 단어</span>
                    <span class="word-count" id="wordCount">0</span>
                </div>
                <div class="panel-info" id="panelInfo">
                    💡 단어를 클릭하면 설명을 볼 수 있어요!
                </div>
                <div class="word-list" id="wordList">
                    <!-- 입력된 단어가 여기에 추가됨 -->
                </div>
            </div>
        </div>

        <div class="input-area">
            <input type="text" id="wordInput" class="word-input" placeholder="단어를 입력하세요..." autocomplete="off"
                autocapitalize="off" spellcheck="false">
        </div>
    </div>

    <div id="resultScreen" class="screen">
        <div class="result-container">
            <h1 class="result-title">GAME OVER</h1>

            <div class="result-stats">
                <div class="result-stat">
                    <span class="result-label">최종 점수</span>
                    <span class="result-value" id="finalScore">0</span>
                </div>
                <div class="result-stat">
                    <span class="result-label">최대 콤보</span>
                    <span class="result-value" id="maxCombo">0</span>
                </div>
                <div class="result-stat">
                    <span class="result-label">정확도</span>
                    <span class="result-value" id="accuracy">0%</span>
                </div>
                <div class="result-stat">
                    <span class="result-label">최종 속도</span>
                    <span class="result-value" id="finalSpeed">x1</span>
                </div>
            </div>

            <div class="name-input-group">
                <input type="text" id="playerName" placeholder="이름을 입력하세요" maxlength="10">
                <button id="submitScoreBtn" class="btn btn-primary">기록 저장</button>
            </div>

            <div class="result-actions">
                <button id="retryBtn" class="btn btn-primary">다시 하기</button>
                <button id="menuBtn" class="btn btn-secondary">메뉴로</button>
            </div>
        </div>
    </div>

    <div id="rankingModal" class="overlay hidden">
        <div class="modal-content ranking-modal">
            <h2>🏆 랭킹</h2>

            <div class="difficulty-tabs" id="difficultyTabs">
                <button class="tab-btn active" data-difficulty="all">전체</button>
                <button class="tab-btn" data-difficulty="1">⭐X1</button>
                <button class="tab-btn" data-difficulty="2">⭐X2</button>
                <button class="tab-btn" data-difficulty="3">⭐X3</button>
                <button class="tab-btn" data-difficulty="4">⭐X4</button>
                <button class="tab-btn" data-difficulty="5">⭐X5</button>
            </div>

            <div class="ranking-list" id="rankingList">
                <div class="ranking-empty">기록이 없습니다</div>
            </div>

            <div class="pagination" id="rankingPagination">
                <button id="prevPageBtn" class="page-btn" disabled>◀</button>
                <span id="pageInfo" class="page-info">1 / 1</span>
                <button id="nextPageBtn" class="page-btn" disabled>▶</button>
            </div>

            <div class="modal-actions">
                <button id="closeRankingBtn" class="btn btn-secondary">닫기</button>
            </div>
        </div>
    </div>

    <div id="wordDetailModal" class="overlay hidden">
        <div class="modal-content word-detail-modal">
            <h3 id="detailWord">단어</h3>
            <p id="detailMeaning">설명</p>
            <button id="closeDetailBtn" class="btn btn-secondary">닫기</button>
        </div>
    </div>

    <div id="pauseOverlay" class="overlay hidden">
        <div class="overlay-content">
            <h2>일시정지</h2>
            <button id="resumeBtn" class="btn btn-primary">계속하기</button>
            <button id="quitBtn" class="btn btn-secondary">그만하기</button>
        </div>
    </div>

    <div id="loadingScreen" class="overlay">
        <div class="loading-content">
            <div class="loader"></div>
            <p id="loadingText">데이터 로딩 중...</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</body>

</html>